{"ast":null,"code":"import { useState } from 'react';\nexport default function FetchMore({\n  children,\n  service,\n  start,\n  limit\n}) {\n  const {\n    0: lastStart,\n    1: setLastStart\n  } = useState(start);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: isDone,\n    1: setIsDone\n  } = useState(false);\n  const {\n    0: data,\n    1: setData\n  } = useState([]);\n\n  const fetchMore = async () => {\n    setIsLoading(true);\n    const newData = await service({\n      start: lastStart,\n      limit\n    });\n    setIsLoading(false);\n    setLastStart(lastStart + newData.length);\n    setData(data.concat(newData));\n\n    if (newData.length < limit) {\n      setIsDone(true);\n    }\n  };\n\n  return children({\n    data,\n    fetchMore,\n    isLoading,\n    isDone\n  });\n}","map":{"version":3,"sources":["/Volumes/Backup HD/frontend/poc-next-web/poc-nextnext/src/lib/api/FetchMore.js"],"names":["useState","FetchMore","children","service","start","limit","lastStart","setLastStart","isLoading","setIsLoading","isDone","setIsDone","data","setData","fetchMore","newData","length","concat"],"mappings":"AAAA,SAASA,QAAT,QAAyB,OAAzB;AAEA,eAAe,SAASC,SAAT,CAAmB;AAAEC,EAAAA,QAAF;AAAYC,EAAAA,OAAZ;AAAqBC,EAAAA,KAArB;AAA4BC,EAAAA;AAA5B,CAAnB,EAAwD;AACrE,QAAM;AAAA,OAACC,SAAD;AAAA,OAAYC;AAAZ,MAA4BP,QAAQ,CAACI,KAAD,CAA1C;AACA,QAAM;AAAA,OAACI,SAAD;AAAA,OAAYC;AAAZ,MAA4BT,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM;AAAA,OAACU,MAAD;AAAA,OAASC;AAAT,MAAsBX,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM;AAAA,OAACY,IAAD;AAAA,OAAOC;AAAP,MAAkBb,QAAQ,CAAC,EAAD,CAAhC;;AAEA,QAAMc,SAAS,GAAG,YAAY;AAC5BL,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACA,UAAMM,OAAO,GAAG,MAAMZ,OAAO,CAAC;AAAEC,MAAAA,KAAK,EAAEE,SAAT;AAAoBD,MAAAA;AAApB,KAAD,CAA7B;AACAI,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACAF,IAAAA,YAAY,CAACD,SAAS,GAAGS,OAAO,CAACC,MAArB,CAAZ;AACAH,IAAAA,OAAO,CAACD,IAAI,CAACK,MAAL,CAAYF,OAAZ,CAAD,CAAP;;AAEA,QAAIA,OAAO,CAACC,MAAR,GAAiBX,KAArB,EAA4B;AAC1BM,MAAAA,SAAS,CAAC,IAAD,CAAT;AACD;AACF,GAVD;;AAYA,SAAOT,QAAQ,CAAC;AAAEU,IAAAA,IAAF;AAAQE,IAAAA,SAAR;AAAmBN,IAAAA,SAAnB;AAA8BE,IAAAA;AAA9B,GAAD,CAAf;AACD","sourcesContent":["import { useState } from 'react'\n\nexport default function FetchMore({ children, service, start, limit }) {\n  const [lastStart, setLastStart] = useState(start)\n  const [isLoading, setIsLoading] = useState(false)\n  const [isDone, setIsDone] = useState(false)\n  const [data, setData] = useState([])\n\n  const fetchMore = async () => {\n    setIsLoading(true)\n    const newData = await service({ start: lastStart, limit })\n    setIsLoading(false)\n    setLastStart(lastStart + newData.length)\n    setData(data.concat(newData))\n\n    if (newData.length < limit) {\n      setIsDone(true)\n    }\n  }\n\n  return children({ data, fetchMore, isLoading, isDone })\n}\n"]},"metadata":{},"sourceType":"module"}